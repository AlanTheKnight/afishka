import{d as D,r as y,y as S,z as B,B as L,e as z,u as o,C as A,D as F,l as I,o as s,c as u,E as n,a as t,G as w,H as m,I as l,J as N,f as c,K as R,L as T,i as M,M as V,A as j,N as H,p as U,k as $,_ as G}from"./index.aee57034.js";const J=(a,p,_=!1)=>{let d=2;return a%10===1&&a%100===1?d=0:2<=a%10&&a%10<=4&&(a%100<10||a%100>=20)&&(d=1),(_?String(a)+" ":"")+p[d]},i=a=>(U("data-v-a7aa39e6"),a=a(),$(),a),K={key:0,class:"container rt-wp mt-4"},q={key:0,class:"alert alert-warning"},O=i(()=>t("i",{class:"bi-exclamation-circle me-2"},null,-1)),P=c("\u0414\u0430\u043D\u043D\u043E\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u0435 \u043E\u0436\u0438\u0434\u0430\u0435\u0442 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430 "),Q=[O,P],W={key:0,class:"position-absolute top-0 end-0 pt-3 pe-3"},X={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-star icon",viewBox:"0 0 16 16"},Y=i(()=>t("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"},null,-1)),Z=[Y],ee={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-star-fill icon",viewBox:"0 0 16 16"},te=i(()=>t("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},null,-1)),se=[te],ue={class:"position-absolute bottom-0 start-0 mb-2 ms-2 badge bg-light text-dark fs-5"},ae={key:0},oe={key:0},ie=c("\u20BD "),ne={key:1},ce={class:"row mt-3"},le={class:"col order-1 order-md-0 fs-5"},de={class:""},re={key:0,class:"mb-3"},_e={class:"mb-1"},he=i(()=>t("i",{class:"bi bi-clock me-2"},null,-1)),ve={key:1,class:"mb-1"},me=i(()=>t("i",{class:"bi-geo-alt me-2"},null,-1)),pe={class:"mb-1"},be=i(()=>t("i",{class:"bi bi-check me-2"},null,-1)),ge={key:2,class:"mb-1"},ke=i(()=>t("i",{class:"bi-person me-2"},null,-1)),fe={key:3,class:"mb-1"},ye=i(()=>t("i",{class:"bi-people me-2"},null,-1)),we={key:0,class:"col-12 col-md-auto order-0 order-md-1 mb-2 mb-md-0"},Ee={class:"mb-2"},xe=i(()=>t("i",{class:"bi-trash me-2"},null,-1)),Ce=c("\u0423\u0434\u0430\u043B\u0438\u0442\u044C "),De=[xe,Ce],Se={class:"mb-2"},Be=["href"],Le=i(()=>t("i",{class:"bi-pencil me-2"},null,-1)),ze=c("\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C "),Ae=[Le,ze],Fe={class:"mb-2"},Ie=i(()=>t("i",{class:"bi-check-lg me-2"},null,-1)),Ne=c("\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C "),Re=[Ie,Ne],Te=D({__name:"EventInfo",setup(a){const p=F(),_=I(),d=y(!0),e=y(null),b=()=>{const h=p.params.id;A(h).then(v=>{e.value=v.data,d.value=!1}).catch(()=>_.push("/"))};S(b);const r=M(),g=B(()=>r.state.auth.user&&e.value&&r.state.auth.user.starred_events.includes(e.value.id)),E=()=>{!e.value||V(e.value.id,!g.value).then(()=>{r.dispatch(j.FETCH_CURRENT_USER)})},x=()=>{!e.value||H(e.value.id,{accepted:!0}).then(b)},C=h=>h.toLocaleDateString("ru",{day:"numeric",month:"long",hour:"numeric",minute:"numeric"});return(h,v)=>(s(),L(o(T),{"is-loading":d.value},{default:z(()=>{var k;return[e.value?(s(),u("div",K,[e.value.accepted?n("",!0):(s(),u("div",q,Q)),t("div",{class:"card",style:N(e.value.thumbnail?`background-image: url(${e.value.thumbnail}); background-size: cover; background-repeat: no-repeat; background-position: center center;`:o(m)[e.value.id%o(m).length][0])},[t("div",{class:w(["card-body position-relative d-flex align-items-center justify-content-center",e.value.thumbnail?["text-light"]:[o(m)[e.value.id%o(m).length][1]]])},[t("h1",{class:w(["card-name fw-bold fs-2",e.value.thumbnail?["badge bg-white text-dark"]:[]])},l(e.value.name),3),o(r).getters.isAuthenticated?(s(),u("div",W,[t("div",{id:"star-btn",onClick:E},[o(g)?(s(),u("svg",ee,se)):(s(),u("svg",X,Z))])])):n("",!0),t("div",ue,[e.value.price>0?(s(),u("div",ae,[t("span",null,l(e.value.price),1),e.value.max_price&&e.value.max_price>e.value.price?(s(),u("span",oe," - "+l(e.value.max_price),1)):n("",!0),ie])):(s(),u("div",ne,"\u0431\u0435\u0441\u043F\u043B\u0430\u0442\u043D\u043E"))])],2)],4),t("div",ce,[t("div",le,[t("div",de,[e.value.description?(s(),u("div",re,l(e.value.description),1)):n("",!0),t("div",_e,[he,c(" "+l(C(new Date(e.value.start))),1)]),e.value.address?(s(),u("div",ve,[me,c(l(e.value.address),1)])):n("",!0),t("div",pe,[be,c(l(e.value.reg_needed?"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u043D\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F"),1)]),e.value.organizer?(s(),u("div",ge,[ke,c(" "+l(e.value.organizer),1)])):n("",!0),e.value.organizer?(s(),u("div",fe,[ye,c(" "+l(o(J)(e.value.participants,["\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A","\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430","\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432"],!0)),1)])):n("",!0)])]),(k=o(r).state.auth.user)!=null&&k.is_staff?(s(),u("div",we,[t("div",Ee,[t("button",{class:"btn btn-outline-danger w-100",onClick:v[0]||(v[0]=()=>{var f;return o(R)(String((f=e.value)==null?void 0:f.id)).then(()=>o(_).push("/"))})},De)]),t("div",Se,[t("a",{class:"btn btn-outline-dark w-100",href:`/admin/core/event/${e.value.id}/change/`},Ae,8,Be)]),t("div",Fe,[e.value.accepted?n("",!0):(s(),u("button",{key:0,class:"btn btn-outline-dark w-100",onClick:x},Re))])])):n("",!0)])])):n("",!0)]}),_:1},8,["is-loading"]))}});const Ve=G(Te,[["__scopeId","data-v-a7aa39e6"]]);export{Ve as default};
//# sourceMappingURL=EventInfo.b523c9be.js.map
